---
import type { CATEGORIES } from '../content.config';

type Category = typeof CATEGORIES[number];

interface Props {
	category: Category;
}

const { category } = Astro.props;

// Category colors for light/dark modes
const categoryColors: Record<Category, { light: string; dark: string; bg: string; bgDark: string }> = {
	'AI': { light: '#059669', dark: '#34d399', bg: '#ecfdf5', bgDark: '#064e3b' },
	'Cybersecurity': { light: '#dc2626', dark: '#f87171', bg: '#fef2f2', bgDark: '#7f1d1d' },
	'Data': { light: '#2563eb', dark: '#60a5fa', bg: '#eff6ff', bgDark: '#1e3a8a' },
	'Privacy': { light: '#7c3aed', dark: '#a78bfa', bg: '#f5f3ff', bgDark: '#4c1d95' },
	'Emerging Tech': { light: '#ea580c', dark: '#fb923c', bg: '#fff7ed', bgDark: '#7c2d12' },
};

const colors = categoryColors[category];
---

<a 
	href={`/blog/category/${category.toLowerCase().replace(/\s+/g, '-')}`} 
	class="category-badge"
	style={`--category-color: ${colors.light}; --category-bg: ${colors.bg};`}
	data-dark-style={`--category-color: ${colors.dark}; --category-bg: ${colors.bgDark};`}
>
	{category}
</a>

<style>
	.category-badge {
		display: inline-flex;
		align-items: center;
		padding: var(--space-1) var(--space-3);
		background-color: var(--category-bg);
		color: var(--category-color);
		font-size: var(--text-xs);
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		border-radius: var(--radius-full, 9999px);
		text-decoration: none;
		transition: all var(--transition-fast);
		border: 1px solid transparent;
	}

	.category-badge:hover {
		filter: brightness(0.95);
		text-decoration: none;
	}

	[data-theme="dark"] .category-badge {
		background-color: var(--category-bg);
		color: var(--category-color);
	}
</style>

<script is:inline>
	// Apply dark mode styles for category badges
	(function() {
		function updateCategoryStyles() {
			const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
			document.querySelectorAll('.category-badge').forEach(badge => {
				const darkStyle = badge.getAttribute('data-dark-style');
				if (isDark && darkStyle) {
					badge.style.cssText = darkStyle;
				}
			});
		}

		// Initial update
		updateCategoryStyles();

		// Watch for theme changes
		const observer = new MutationObserver((mutations) => {
			mutations.forEach((mutation) => {
				if (mutation.attributeName === 'data-theme') {
					updateCategoryStyles();
				}
			});
		});

		observer.observe(document.documentElement, { attributes: true });
	})();
</script>
